# Lumen Web Interface

## Access

**Domain (HTTPS):** https://lumenchat.org üîí  
**Legacy HTTP:** http://lumenchat.org:3001  
**Direct IP:** http://159.89.130.149:3001

**Login Credentials:**
- Password: `LumenCode2026!`

## Features

### üîê Secure Authentication
- JWT token-based auth (24h expiration)
- Password-protected access
- Auto-generated secret key

### üí¨ Real-time Chat
- WebSocket connection for instant responses
- Same agent chain as CLI and Telegram
- Full memory system integration

### ü§ñ AI Capabilities
- **Response Mode**: Natural language answers
- **Code Generation**: Multi-language code with syntax highlighting
- **Terminal Commands**: Execute commands on droplet (full access)
- **Specialized Tools**: File tree generation, summarization

### ‚öôÔ∏è Controls
- **Auto-approve**: Toggle automatic command execution
- **Stats**: View memory statistics
- **Logout**: Secure session termination

## Architecture

```
Browser (WebSocket)
  ‚Üì
server.js (Express + WS)
  ‚Üì
Agent Chain (same as chat.js/telegram-bot.js)
  ‚îú‚îÄ Base Agent
  ‚îú‚îÄ Schema Choice Agent
  ‚îî‚îÄ Specialized Tools
  ‚Üì
Memory System (shared memory.json)
  ‚Üì
Terminal Executor (full host access)
```

## Security

- **SSL/TLS encryption** via Let's Encrypt (expires 2026-05-11)
- **Secure WebSocket** (wss://) for real-time communication
- JWT authentication with 24h expiration
- Secure WebSocket connection
- Password protection
- Admin-only access
- Automatic HTTP ‚Üí HTTPS redirect

## Port Configuration

- **Web Server**: 3001
- **Telegram Bot**: No port (webhook/polling)
- **Dashboard**: 8080 (separate service)

## Access Methods

**Production (Recommended):**
- https://lumenchat.org (HTTPS with SSL)
- Secure WebSocket (wss://)
- Port 443 (standard HTTPS)
- Automatic redirect from HTTP

**Legacy Access:**
- http://lumenchat.org:3001 (redirects to HTTPS)
- http://159.89.130.149:3001 (direct to app server)

**Local Testing:**
```bash
# Start server locally
npm start

# Access at http://localhost:3001
```

## Deployment

Already deployed via PM2:
```bash
pm2 list
# Look for: lumen-web (ID: 7)

# View logs
pm2 logs lumen-web

# Restart
pm2 restart lumen-web
```

## Environment Variables

```bash
WEB_PORT=3001
JWT_SECRET=<auto-generated-64-char-hex>
ADMIN_PASSWORD=LumenCode2026!
```

## Integration

All three interfaces (CLI, Telegram, Web) share:
- ‚úÖ Same memory system
- ‚úÖ Same agent chain
- ‚úÖ Same terminal executor
- ‚úÖ Same tool availability
- ‚úÖ Full droplet access

## Usage Tips

1. **First Login**: Use password to get JWT token
2. **Terminal Commands**: Toggle auto-approve for automatic execution
3. **Code Generation**: Ask for code in any language
4. **Memory Stats**: Click stats button to see interaction history
5. **Continuous Conversation**: Memory persists across all interfaces

## Troubleshooting

```bash
# Check if running
pm2 info lumen-web

# Check logs
pm2 logs lumen-web --lines 50

# Restart if needed
pm2 restart lumen-web

# Test WebSocket
curl http://159.89.130.149:3001/api/stats
```

## Future Enhancements

- [ ] Command approval UI for dangerous commands
- [ ] File upload/download
- [ ] Multi-user support with separate sessions
- [ ] Dark/light theme toggle
- [ ] Export conversation history
- [ ] Voice input support
